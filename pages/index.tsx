import { useState } from 'react'
import type { NextPage } from 'next'
import Head from 'next/head'

// Components
import { Dashboard } from '../components/Dashboard/Dashboard'
import BasicLayout from '../layout/Basic'
import { Nav } from 'components/Nav/Nav'
import { SCIndexMain } from 'styles'

const Home: NextPage<any> = ({ data }) => {
  return (
    <BasicLayout>
      <Head>
        <title>BlogApp</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <SCIndexMain>
        <Nav />
        <Dashboard data={data} />
      </SCIndexMain>
    </BasicLayout>
  )
}

export const getStaticProps = async () => {
  const res = await fetch('http://localhost:3000/api/posts')
  const json = await res.json()
  return {
    props: {
      data: json,
    },
  }
}

export default Home
